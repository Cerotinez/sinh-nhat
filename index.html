<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For Someone Special ‚ù§Ô∏è</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(135deg,#f9a8d4,#f3e8ff);overflow:hidden}
    #app{position:relative;width:100%;height:100%}
    #canvas-container{position:fixed;inset:0;z-index:1;pointer-events:none}
    #content{position:relative;z-index:10;height:100%;display:flex;align-items:center;justify-content:center;padding:24px;box-sizing:border-box}
    .step{position:absolute;width:100%;max-width:880px;padding:36px;background:rgba(255,255,255,0.55);backdrop-filter:blur(8px);border-radius:18px;box-shadow:0 12px 30px rgba(0,0,0,0.08);text-align:center;opacity:0;transform:translateY(16px);transition:all .6s cubic-bezier(.16,1,.3,1);pointer-events:none}
    .step.active{opacity:1;transform:translateY(0);pointer-events:all}
    .btn{background:linear-gradient(135deg,#ec4899,#f43f5e);color:#fff;padding:10px 18px;border-radius:999px;border:0;font-weight:600;cursor:pointer;box-shadow:0 6px 18px rgba(236,72,153,.22)}
    .text-gradient{background:linear-gradient(135deg,#ec4899,#f43f5e,#f59e0b);-webkit-background-clip:text;background-clip:text;color:transparent}
    .emoji{font-size:2.5rem;margin-bottom:14px;display:inline-block}
    .image-frame{background:linear-gradient(90deg,#ffe6f0,#fff0fb);padding:20px;border-radius:14px;display:flex;align-items:center;justify-content:center}
    img.memory{max-width:360px;width:100%;height:auto;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.08)}
    p.lead{color:#4b2b3a;line-height:1.6}
    #progress-container{position:fixed;top:18px;left:50%;transform:translateX(-50%);width:80%;max-width:420px;height:6px;background:rgba(255,255,255,.35);border-radius:999px;z-index:50}
    #progress-bar{height:100%;width:0;background:linear-gradient(90deg,#ec4899,#f43f5e);border-radius:999px;transition:width .45s ease}
    @media (max-width:640px){.step{padding:20px}}
  </style>
</head>
<body>
  <div id="app">
    <div id="canvas-container"></div>

    <div id="progress-container"><div id="progress-bar"></div></div>

    <div id="content">
      <!-- Step 1 -->
      <div class="step active" id="step1">
        <div class="emoji">‚ù§Ô∏è</div>
        <h1 class="text-4xl font-bold mb-3 text-gradient">To Pookie</h1>
        <p class="lead mb-6">Today is your birthday</p>
        <button class="btn" id="start-btn">Ti·∫øp t·ª•c</button>
      </div>

      <!-- Step 2 -->
      <div class="step" id="step2">
        <div class="emoji">üéâ</div>
        <h2 class="text-2xl font-bold mb-3 text-gradient">From ƒêƒÉng Ph∆∞∆°ng</h2>
        <p class="lead mb-6">Ph∆∞∆°ng ch√∫c pookie m√£i cute, th√†nh c√¥ng v·ªõi ƒë·ªì √°n v√† t√¨m ƒë∆∞·ª£c c√¥ng vi·ªác ngon.</p>
        <button class="btn" id="next-btn-2">Ti·∫øp n·ªØa</button>
      </div>

      <!-- Step 3 -->
      <div class="step" id="step3">
        <h2 class="text-2xl font-bold mb-4 text-gradient">From H·∫£i Ng·ªçc</h2>
        <p class="lead mb-6">H·∫£i Ng·ªçc ch√∫c Y·∫øn Nhi tu·ªïi m·ªõi b√πng n·ªï, ho√†n th√†nh t·ªët m·ªçi k·∫ø ho·∫°ch v√† v·ªÅ x√¢y nh√† nh√©.</p>
        <button class="btn" id="next-btn-3">C√≤n n·ªØa</button>
      </div>

<!-- Step 4: Same style as the others -->
<div class="step" id="step4">
    <div class="emoji">üì∏</div>
    <h2 class="text-3xl md:text-4xl font-bold mb-6 text-gradient">From Anh Linh</h2>

    <p class="text-lg text-gray-700 mb-6 leading-relaxed">
        Anh Linh ch√∫c Y·∫øn Nhi tu·ªïi m·ªõi tr·∫ª kh·ªèe, t·ªët nghi·ªáp th·∫≠t m∆∞·ª£t, t√¨m ƒë∆∞·ª£c vi·ªác nh∆∞ √Ω
        v√† lu√¥n g·∫∑p to√†n ng∆∞·ªùi h·ª£p t·∫ßn s·ªë.  
        Ch√∫c m·ªçi ƒëi·ªÅu d·ªÖ th∆∞∆°ng nh·∫•t x·∫£y ƒë·∫øn v·ªõi em.
    </p>

    <button class="btn" id="next-btn-4">N·ªët nha</button>
</div>


      <!-- Step 5 -->
      <div class="step" id="step5">
        <div class="emoji">üéÇ</div>
        <h2 class="text-2xl font-bold mb-3 text-gradient">Happy birthday to you</h2>
        <p class="lead mb-6">Ch√∫c Linh m·ªôt tu·ªïi m·ªõi tr√†n ng·∫≠p ni·ªÅm vui, ti·∫øng c∆∞·ªùi v√† m·ªçi ∆∞·ªõc m∆° th√†nh hi·ªán th·ª±c.</p>
        <p class="text-xl font-semibold text-pink-600 mb-6">We love you ‚ù§Ô∏è</p>
        <button class="btn" id="confetti-btn">Celebrate!</button>
      </div>
    </div>
  </div>

  <script>
    // Three.js setup (crisp + full screen)
    const container = document.getElementById('canvas-container');
    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setPixelRatio(window.devicePixelRatio || 1);
    renderer.setSize(window.innerWidth, window.innerHeight, false);
    renderer.domElement.style.display = 'block';
    container.appendChild(renderer.domElement);

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 30;

    // Simple heart geometry (keeps small and light)
    const heartShape = new THREE.Shape();
    heartShape.moveTo(0, 0.8);
    heartShape.bezierCurveTo(0.2, 1.5, 1.2, 1.4, 1.2, 0.5);
    heartShape.bezierCurveTo(1.2, -0.2, 0.6, -0.4, 0, -0.6);
    heartShape.bezierCurveTo(-0.6, -0.4, -1.2, -0.2, -1.2, 0.5);
    heartShape.bezierCurveTo(-1.2, 1.4, -0.2, 1.5, 0, 0.8);
    const extrude = { depth: 0.1, bevelEnabled: true, bevelSize: 0.05, bevelThickness: 0.05 };
    const geometry = new THREE.ExtrudeGeometry(heartShape, extrude);

    const hearts = [];
    const colors = [0xff6b6b,0xff9ab4,0xffb3d9,0xffd6ec];
    for(let i=0;i<18;i++){
      const mat = new THREE.MeshStandardMaterial({ color: colors[i%colors.length], transparent:true, opacity:0.95, roughness:0.6 });
      const mesh = new THREE.Mesh(geometry, mat);
      mesh.position.x = (Math.random()-0.5)*60;
      mesh.position.y = (Math.random()-0.5)*40;
      mesh.position.z = (Math.random()-0.5)*40;
      const s = 0.6 + Math.random()*1.2;
      mesh.scale.set(s,s,s);
      mesh.userData = { ox: mesh.position.x, oy: mesh.position.y, oz: mesh.position.z, rx: Math.random()*0.01, ry: Math.random()*0.01, f: 1+Math.random()*2 };
      scene.add(mesh);
      hearts.push(mesh);
    }

    scene.add(new THREE.AmbientLight(0xffffff, 0.6));
    const dir = new THREE.DirectionalLight(0xffffff, 0.6);
    dir.position.set(5,5,5);
    scene.add(dir);

    function animateThree(){
      const t = Date.now()*0.001;
      hearts.forEach(h=>{
        h.position.x = h.userData.ox + Math.sin(t*h.userData.f)*2;
        h.position.y = h.userData.oy + Math.cos(t*h.userData.f)*2;
        h.rotation.x += h.userData.rx;
        h.rotation.y += h.userData.ry;
      });
      renderer.render(scene, camera);
      requestAnimationFrame(animateThree);
    }
    animateThree();

    window.addEventListener('resize', ()=>{
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight, false);
    });

    // Steps and progress
    let currentStep = 1;
    const total = 5;
    const updateProgress = ()=>{
      const pct = ((currentStep-1)/(total-1))*100;
      document.getElementById('progress-bar').style.width = pct + '%';
    };
    const show = (n)=>{
      document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
      const el = document.getElementById('step'+n);
      if(el) el.classList.add('active');
      updateProgress();
    };

    document.getElementById('start-btn').addEventListener('click', ()=>{ currentStep=2; show(currentStep); });
    document.getElementById('next-btn-2').addEventListener('click', ()=>{ currentStep=3; show(currentStep); });
    document.getElementById('next-btn-3').addEventListener('click', ()=>{ currentStep=4; show(currentStep); });
    document.getElementById('next-btn-4').addEventListener('click', ()=>{ currentStep=5; show(currentStep); });

    // Confetti: use safe shapes (star/fallback)
    document.getElementById('confetti-btn').addEventListener('click', ()=>{
      // burst
      confetti({ particleCount: 160, spread: 70, origin: { y: 0.6 }, colors: ['#ff1493','#ff69b4','#ffc0cb','#ff6b6b'] });
      // side bursts
      setTimeout(()=> confetti({ particleCount: 40, angle: 60, spread: 50, origin: { x: 0 }, colors: ['#ff1493','#ff69b4'] }), 250);
      setTimeout(()=> confetti({ particleCount: 40, angle: 120, spread: 50, origin: { x: 1 }, colors: ['#ff1493','#ff69b4'] }), 250);
      // gentle star shower
      setTimeout(()=> confetti({ particleCount: 50, spread: 120, origin: { y: 0.55 }, shapes: ['star'], colors: ['#ff1493','#ffc0cb'] }), 500);

      // small animation on hearts (float up + fade)
      hearts.forEach(h=>{
        gsap.to(h.position, { y: h.position.y + 20, duration: 2.6, ease: "power1.out" });
        gsap.to(h.material, { opacity: 0, duration: 2.6, ease: "power1.out" });
      });
    });

    // Initial progress
    updateProgress();

    // Helpful console hint
    console.log('If image not visible: upload crush.webp or happybunny.jpg to repo root and hard-refresh.');
  </script>
</body>
</html>
